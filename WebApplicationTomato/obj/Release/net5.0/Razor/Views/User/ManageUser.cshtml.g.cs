#pragma checksum "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "7501fc08671e07391c0e139d334e6bdec3718d6d"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_User_ManageUser), @"mvc.1.0.view", @"/Views/User/ManageUser.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\_ViewImports.cshtml"
using WebApplicationTomato;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\_ViewImports.cshtml"
using WebApplicationTomato.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
using System.Globalization;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"7501fc08671e07391c0e139d334e6bdec3718d6d", @"/Views/User/ManageUser.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"6e43ab83a039dc112e0ca5a6969b7ad96bbb5314", @"/Views/_ViewImports.cshtml")]
    public class Views_User_ManageUser : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
  
    var data = (List<WebApplicationTomato.ViewModel.UserDTO>)Model;

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
#nullable restore
#line 6 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
  
    ViewData["Title"] = "Manage User";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<h1>Category</h1>\r\n");
#nullable restore
#line 11 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
 if (ViewBag.SucessMessage is not null)
{

#line default
#line hidden
#nullable disable
            WriteLiteral("    <div class=\"alert alert-primary\" role=\"alert\">\r\n        ");
#nullable restore
#line 14 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
   Write(ViewData["SucessMessage"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n    </div>\r\n");
#nullable restore
#line 16 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"

}

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
 if (ViewBag.ErrorMessage is not null)
{

#line default
#line hidden
#nullable disable
            WriteLiteral("    <div class=\"alert alert-primary\" role=\"alert\">\r\n        ");
#nullable restore
#line 21 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
   Write(ViewData["ErrorMessage"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n    </div>\r\n");
#nullable restore
#line 23 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"

}

#line default
#line hidden
#nullable disable
            WriteLiteral("<table class=\"table highlight\">\r\n    <thead>\r\n        <tr>\r\n            <th scope=\"col\">Accion</th>\r\n            <th scope=\"col\">Name</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody id=\"categories-table\">\r\n");
#nullable restore
#line 33 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
         foreach (var item in data)
        {

#line default
#line hidden
#nullable disable
            WriteLiteral("            <tr");
            BeginWriteAttribute("id", " id=\"", 738, "\"", 751, 1);
#nullable restore
#line 35 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
WriteAttributeValue("", 743, item.Id, 743, 8, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                <td>\r\n                    <button type=\"button\" class=\"btn btn-primary\"");
            BeginWriteAttribute("onclick", " onclick=\'", 842, "\'", 873, 3);
            WriteAttributeValue("", 852, "showModal(\"", 852, 11, true);
#nullable restore
#line 37 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
WriteAttributeValue("", 863, item.Id, 863, 8, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 871, "\")", 871, 2, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n                        Manage\r\n                    </button>\r\n\r\n                </td>\r\n                <td>");
#nullable restore
#line 42 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
               Write(item.Name);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n\r\n            </tr>\r\n");
#nullable restore
#line 45 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
        }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"    </tbody>
</table>

<!-- Modal -->
<div class=""modal fade"" id=""myModal"" tabindex=""-1"" aria-labelledby=""exampleModalLabel"" aria-hidden=""true"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <h5 class=""modal-title"" id=""exampleModalLabel"">User</h5>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">&times;</span>
                </button>
            </div>
            <div class=""modal-body"">
                <div class=""form-group"">
                    <label for=""inputAddress"">Id</label>
                    <input type=""text"" id=""Id"" class=""form-control"" name=""Id"" />
                </div>
                <div class=""form-group"">
                    <label for=""inputAddress"">User Name</label>
                    <input type=""text"" id=""UserName"" class=""form-control"" name=""UserName"" />
                </div>

                <d");
            WriteLiteral("iv class=\"form-row\">\r\n\r\n                    <div class=\"form-group col-md-12\">\r\n                        <label for=\"inputState\">Role</label>\r\n                        ");
#nullable restore
#line 73 "C:\Users\Mauricio\source\repos\WebApplicationTomato\WebApplicationTomato\Views\User\ManageUser.cshtml"
                   Write(Html.DropDownList("RoleId", new SelectList(ViewBag.RoleList, "Value", "Text"), new { @class = "form-control", @placeholder = "Roles" }));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
                    </div>

                </div>

                <table class=""table"" id=""gridTable"">
                    <thead class=""thead-light"">
                        <tr>
                            <th scope=""col"">Role Name</th>
                            <th scope=""col"">Action</th>

                        </tr>
                    </thead>
                    <tbody id=""bodyTable""></tbody>
                </table>

            </div>
            <div class=""modal-footer"">
                <button type=""button"" class=""btn btn-warning"" onclick=""alert('No implemenented yet');"">Delete</button>

                <button type=""button"" class=""btn btn-secondary"" data-dismiss=""modal"" id=""btnClose"">Close</button>
                <button type=""button"" class=""btn btn-primary"" id=""saveChanges"" onclick=""addRoles()"">Add Role</button>
            </div>
        </div>
    </div>
</div>

");
            WriteLiteral(@"<script>
    
    function showModal(id) {
        alertify.success(""The item has been loaded"");

        debugger;
        $.ajax({
            url: '/User/GetUser/' + id,
            type: 'POST',
            success: function (result) {
                console.log(result);
                console.log(result);
                $(""#Id"").val(id);
                $(""#UserName"").val(result.name);
                $(""#RoleId"").val(result.roleId);

                $('#myModal').modal()
            }
        });



    }

    function addRoles() {
        const user = {
            Name: $(""#RoleId option:selected"").text()
            ,UserId: document.getElementById(""Id"").value
            , Id: document.getElementById(""RoleId"").value
        };

        $.ajax({
            data: user,
            type: 'POST',
            url: '/User/AddRole',
        }).done(function (response) {
            alertify.success(""The role has been added successfully!!"");
            console.log(r");
            WriteLiteral(@"esponse);
            generateTable(response);
        }).fail(function (jqXHR, textStatus, errorThrown) {
            alertify.error(jqXHR.responseText || textStatus);
        });



    }
    function generateListTable(data) {

        //$(""#gridTable tbody"").empty();
        var tableelement = $(""#gridTable tbody"");

        for (var i = 0; i < data.length; i++) {
            tableelement.append(createRow(data[i]));
        }

    }
    function generateTable(data) {

        //$(""#gridTable tbody"").empty();
        var tableelement = $(""#gridTable tbody"");

        tableelement.append(createRow(data));
        

    }
    function createRow(object) {

        var trElement = ""<tr id='"" + object.id + ""'>"";
        trElement += ""<td>"" + object.name + ""</td>"";

        trElement += ""<td>"";
        trElement += ""<button class='btn btn-danger'"" + ""onclick = deleteRoleFromUser('"" + object.id + ""')"" + "">Delete Role</button>"";
        trElement += ""</td>"";

        return trEl");
            WriteLiteral(@"ement;
    }
    function deleteRoleFromUser(id) {
        const user = {
             UserId: document.getElementById(""Id"").value
            , Id: id
        };

        $.ajax({
            data: user,
            type: 'POST',
            url: '/User/DeleteRoleFromUser',
        }).done(function (response) {
            if (response.status) {
                alertify.success(""It has been deleted successfully!!"");
                $(""#"" + id).remove();
                document.getElementById(""btnClose"").click();
            }
            else {
                alertify.error(""The item has assigned child element, please delete firt the childen elements"");
            }

        }).fail(function (jqXHR, textStatus, errorThrown) {
            alertify.error(jqXHR.responseText || textStatus);
        });


    }
    
</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
